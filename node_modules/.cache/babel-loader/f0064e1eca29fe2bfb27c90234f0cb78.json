{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\"use strict\";\n\nexport default {\n  name: \"ImageBrowser\",\n\n  created() {\n    this.setup();\n  },\n\n  props: {\n    maxDate: String,\n    mediaType: String,\n    mediaTitle: String,\n    mediaURL: String,\n    explanation: String\n  },\n  data: function () {\n    return {\n      apiKey: \"5NqF6jh9w3uVhB9rwEeUJfSIwBgcavPvzYEO7lH3\"\n    };\n  },\n  methods: {\n    setup() {\n      let now = new Date();\n      let dd = String(now.getDate()).padStart(2, \"0\");\n      let mm = String(now.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n\n      let yyyy = now.getFullYear();\n      let today = `${yyyy}-${mm}-${dd}`; // eslint-disable-next-line vue/no-mutating-props\n\n      if (this.$root.$data.currentDate === \"\") {\n        this.$root.$data.currentDate = today;\n      }\n\n      this.$props.maxDate = today;\n      this.fetchMedia();\n    },\n\n    updateDate(event) {\n      event.preventDefault();\n      let selectedDate = document.getElementById(\"search-box\").value;\n      this.$root.$data.currentDate = selectedDate;\n      this.fetchMedia();\n    },\n\n    fetchMedia() {\n      let selectedDate = this.$root.$data.currentDate;\n      const URL = `https://api.nasa.gov/planetary/apod?api_key=${this.$data.apiKey}&date=${selectedDate}`;\n      fetch(URL).then(response => response.json()).then(json => {\n        console.log(json);\n        this.$props.mediaType = json.media_type;\n        this.$props.mediaTitle = json.title;\n        this.$props.mediaURL = json.url;\n        this.$props.explanation = json.explanation;\n      });\n    },\n\n    save() {\n      if ( //if current date is not in favorites yet\n      this.$root.$data.currentFavorites.find(date => date === this.$root.$data.currentDate) === undefined) {\n        this.$root.$data.currentFavorites.push(this.$root.$data.currentDate);\n      }\n    },\n\n    unsave() {\n      let index = this.$root.$data.currentFavorites.findIndex( //not to be confused with indexOf(). This was one source of bug\n      date => date === this.$root.$data.currentDate);\n      console.log(`index = ${index}`);\n\n      if (index !== -1) {\n        this.$root.$data.currentFavorites.splice(index, 1);\n      }\n    }\n\n  },\n  computed: {\n    isSaved() {\n      return this.$root.$data.currentFavorites.find(date => date === this.$root.$data.currentDate) !== undefined;\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;;AAEA;AACAA,sBADA;;AAEAC;AACA;AACA,GAJA;;AAKAC;AACAC,mBADA;AAEAC,qBAFA;AAGAC,sBAHA;AAIAC,oBAJA;AAKAC;AALA,GALA;AAYAC;AACA;AACAC;AADA;AAGA,GAhBA;AAiBAC;AACAC;AACA;AACA;AACA,2DAHA,CAGA;;AACA;AACA,wCALA,CAOA;;AACA;AACA;AACA;;AACA;AAEA;AACA,KAfA;;AAgBAC;AACAC;AACA;AACA;AACA;AACA,KArBA;;AAsBAC;AACA;AACA;AACAC,iBACAC,IADA,CACAC,2BADA,EAEAD,IAFA,CAEAE;AACAC;AACA;AACA;AACA;AACA;AACA,OARA;AASA,KAlCA;;AAmCAC;AACA,WACA;AACA,6CACAC,6CADA,MAEAC,SAJA,EAKA;AACA;AACA;AACA,KA5CA;;AA6CAC;AACA,+DACA;AACAF,mDAFA;AAIAF;;AACA;AACA;AACA;AACA;;AAtDA,GAjBA;AAyEAK;AACAC;AACA,aACA,uCACAJ,6CADA,MAEAC,SAHA;AAKA;;AAPA;AAzEA","names":["name","created","props","maxDate","mediaType","mediaTitle","mediaURL","explanation","data","apiKey","methods","setup","updateDate","event","fetchMedia","fetch","then","response","json","console","save","date","undefined","unsave","computed","isSaved"],"sourceRoot":"src/components","sources":["ImageBrowser.vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"login-prompt\" v-show=\"!this.$root.$data.isLoggedIn\">\n      <p>You are not logged in yet. Please log in to browse.</p>\n    </div>\n    <div v-show=\"this.$root.$data.isLoggedIn\">\n      <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n        <a class=\"navbar-brand\" href=\"#\">APOD</a>\n        <button\n          class=\"navbar-toggler\"\n          type=\"button\"\n          data-toggle=\"collapse\"\n          data-target=\"#navbarSupportedContent\"\n          aria-controls=\"navbarSupportedContent\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n        >\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul class=\"navbar-nav mr-auto\"></ul>\n          <label id=\"search-box-lable\" for=\"search-box\"\n            >Pick a date between 06/16/1995 and today</label\n          >\n          <form class=\"form-inline my-2 my-lg-0\">\n            <input\n              type=\"date\"\n              id=\"search-box\"\n              class=\"form-control mr-sm-2\"\n              name=\"selector\"\n              min=\"1995-06-16\"\n              placeholder=\"Search\"\n              aria-label=\"Search\"\n              v-bind:value=\"this.$root.$data.currentDate\"\n              v-bind:max=\"this.$props.maxDate\"\n            />\n            <button\n              id=\"search-button\"\n              class=\"btn btn-outline-success my-2 my-sm-0\"\n              type=\"submit\"\n              @click=\"updateDate\"\n            >\n              Explore!\n            </button>\n          </form>\n        </div>\n      </nav>\n      <div id=\"result\">\n        <h3 id=\"result-header\">\n          Astronomy image of {{ this.$root.$data.currentDate }}\n          <button id=\"save-button\" v-show=\"!isSaved\" @click.prevent=\"save\">\n            Save\n          </button>\n          <button id=\"unsave-button\" v-show=\"isSaved\" @click.prevent=\"unsave\">\n            Unsave\n          </button>\n        </h3>\n        <h4 id=\"media-title\">{{ mediaTitle }}</h4>\n        <div id=\"result-container\">\n          <div id=\"media-container\">\n            <div id=\"image\" v-show=\"mediaType === 'image'\">\n              <img v-bind:src=\"mediaURL\" />\n            </div>\n            <div id=\"video\" v-show=\"mediaType === 'video'\">\n              <iframe v-bind:src=\"mediaURL\"></iframe>\n            </div>\n          </div>\n          <div id=\"explanation-container\">\n            <p>\n              {{ explanation }}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\"use strict\";\n\nexport default {\n  name: \"ImageBrowser\",\n  created() {\n    this.setup();\n  },\n  props: {\n    maxDate: String,\n    mediaType: String,\n    mediaTitle: String,\n    mediaURL: String,\n    explanation: String,\n  },\n  data: function () {\n    return {\n      apiKey: \"5NqF6jh9w3uVhB9rwEeUJfSIwBgcavPvzYEO7lH3\",\n    };\n  },\n  methods: {\n    setup() {\n      let now = new Date();\n      let dd = String(now.getDate()).padStart(2, \"0\");\n      let mm = String(now.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n      let yyyy = now.getFullYear();\n      let today = `${yyyy}-${mm}-${dd}`;\n\n      // eslint-disable-next-line vue/no-mutating-props\n      if (this.$root.$data.currentDate === \"\") {\n        this.$root.$data.currentDate = today;\n      }\n      this.$props.maxDate = today;\n\n      this.fetchMedia();\n    },\n    updateDate(event) {\n      event.preventDefault();\n      let selectedDate = document.getElementById(\"search-box\").value;\n      this.$root.$data.currentDate = selectedDate;\n      this.fetchMedia();\n    },\n    fetchMedia() {\n      let selectedDate = this.$root.$data.currentDate;\n      const URL = `https://api.nasa.gov/planetary/apod?api_key=${this.$data.apiKey}&date=${selectedDate}`;\n      fetch(URL)\n        .then((response) => response.json())\n        .then((json) => {\n          console.log(json);\n          this.$props.mediaType = json.media_type;\n          this.$props.mediaTitle = json.title;\n          this.$props.mediaURL = json.url;\n          this.$props.explanation = json.explanation;\n        });\n    },\n    save() {\n      if (\n        //if current date is not in favorites yet\n        this.$root.$data.currentFavorites.find(\n          (date) => date === this.$root.$data.currentDate\n        ) === undefined\n      ) {\n        this.$root.$data.currentFavorites.push(this.$root.$data.currentDate);\n      }\n    },\n    unsave() {\n      let index = this.$root.$data.currentFavorites.findIndex(\n        //not to be confused with indexOf(). This was one source of bug\n        (date) => date === this.$root.$data.currentDate\n      );\n      console.log(`index = ${index}`);\n      if (index !== -1) {\n        this.$root.$data.currentFavorites.splice(index, 1);\n      }\n    },\n  },\n  computed: {\n    isSaved() {\n      return (\n        this.$root.$data.currentFavorites.find(\n          (date) => date === this.$root.$data.currentDate\n        ) !== undefined\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n* {\n  font-family: monospace !important;\n  color: #4f4f4f;\n}\n\n.navbar {\n  border-bottom: 6px gray double;\n  position: fixed !important;\n  top: 77px !important;\n  width: 100% !important;\n}\n\n.navbar-brand {\n  font-size: 30px !important;\n}\n\n#save-button,\n#unsave-button {\n  float: right;\n}\n\n#result {\n  margin: 90px 0 200px 0;\n}\n\ninput,\nlabel {\n  margin: 0.4rem 0;\n}\n#search-box-lable {\n  display: inline-block;\n  font-size: 1rem;\n}\n\n#media-container,\n#explanation-container {\n  justify-content: center;\n  margin: 50px 30px;\n}\n#image,\n#video {\n  display: flex;\n  justify-content: center;\n}\n#image > img {\n  width: 100%;\n}\n\n#explanation-container > p {\n  font-size: 2em;\n}\n\n#result-header {\n  font-weight: bold;\n  font-size: 2.75em;\n  margin: 160px 30px 20px 30px;\n}\n#media-title {\n  color: gray;\n  font-weight: bold;\n  font-size: 2.75em;\n  margin: 0 50px;\n}\n\n#video {\n  position: relative;\n  padding-bottom: 56.25%; /* 16:9, which is 56.25% of width */\n  height: 0;\n}\n\n#video > iframe {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n}\n@media only screen and (max-width: 999px) {\n  #search-button {\n    width: 100%;\n  }\n  #media-container {\n    margin: 10px;\n  }\n}\n\n@media only screen and (min-width: 1200px) {\n  /*#result-container{*/\n  /*    display: flex;*/\n  /*}*/\n  #media-container {\n    float: left;\n    width: 65%;\n    margin: 30px;\n  }\n  #search-box-lable {\n    margin: 0 15px;\n  }\n  #explanation-container {\n    margin: 0 30px 100px 30px;\n  }\n}\n\n#login-prompt {\n  margin-top: 125px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}