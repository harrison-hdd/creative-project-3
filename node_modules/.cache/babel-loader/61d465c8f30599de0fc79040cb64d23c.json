{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\"use strict\";\n\nimport \"core-js/modules/es.string.pad-start.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.find.js\";\nexport default {\n  name: \"ImageBrowser\",\n  created: function created() {\n    this.setup();\n  },\n  props: {\n    maxDate: String,\n    mediaType: String,\n    mediaTitle: String,\n    mediaURL: String,\n    explanation: String\n  },\n  data: function data() {\n    return {\n      apiKey: \"5NqF6jh9w3uVhB9rwEeUJfSIwBgcavPvzYEO7lH3\"\n    };\n  },\n  methods: {\n    setup: function setup() {\n      // if (this.$root.$data.currentDate !== \"\") {\n      //   this.fetchMedia();\n      //   return;\n      // }\n      if (this.$root.$data.currentDate === \"\") {\n        var now = new Date();\n        var dd = String(now.getDate()).padStart(2, \"0\");\n        var mm = String(now.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n\n        var yyyy = now.getFullYear();\n        var today = \"\".concat(yyyy, \"-\").concat(mm, \"-\").concat(dd); // eslint-disable-next-line vue/no-mutating-props\n\n        this.$root.$data.currentDate = today;\n        this.$props.maxDate = today;\n      }\n\n      this.fetchMedia();\n    },\n    updateDate: function updateDate(event) {\n      event.preventDefault();\n      var selectedDate = document.getElementById(\"search-box\").value;\n      this.$root.$data.currentDate = selectedDate;\n      this.fetchMedia();\n    },\n    fetchMedia: function fetchMedia() {\n      var _this = this;\n\n      var selectedDate = this.$root.$data.currentDate;\n      var URL = \"https://api.nasa.gov/planetary/apod?api_key=\".concat(this.$data.apiKey, \"&date=\").concat(selectedDate);\n      fetch(URL).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        console.log(json);\n        _this.$props.mediaType = json.media_type;\n        _this.$props.mediaTitle = json.title;\n        _this.$props.mediaURL = json.url;\n        _this.$props.explanation = json.explanation;\n      });\n    }\n  },\n  computed: {\n    isSaved: function isSaved() {\n      var _this2 = this;\n\n      return this.$root.$data.currentFavorites.find(function (date) {\n        return date === _this2.$root.$data.currentDate;\n      }) !== undefined;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;;;;;;AAEA;AACAA,sBADA;AAEAC,SAFA,qBAEA;AACA;AACA,GAJA;AAKAC;AACAC,mBADA;AAEAC,qBAFA;AAGAC,sBAHA;AAIAC,oBAJA;AAKAC;AALA,GALA;AAYAC;AACA;AACAC;AADA;AAGA,GAhBA;AAiBAC;AACAC,SADA,mBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAHA,CAGA;;AACA;AACA,oEALA,CAOA;;AACA;AACA;AACA;;AACA;AACA,KAlBA;AAmBAC,cAnBA,sBAmBAC,KAnBA,EAmBA;AACAA;AACA;AACA;AACA;AACA,KAxBA;AAyBAC,cAzBA,wBAyBA;AAAA;;AACA;AACA;AACAC,iBACAC,IADA,CACA;AAAA;AAAA,OADA,EAEAA,IAFA,CAEA;AACAC;AACA;AACA;AACA;AACA;AACA,OARA;AASA;AArCA,GAjBA;AAwDAC;AACAC,WADA,qBACA;AAAA;;AACA,aACA,uCACA;AAAA;AAAA,OADA,MAEAC,SAHA;AAKA;AAPA;AAxDA","names":["name","created","props","maxDate","mediaType","mediaTitle","mediaURL","explanation","data","apiKey","methods","setup","updateDate","event","fetchMedia","fetch","then","console","computed","isSaved","undefined"],"sourceRoot":"src/components","sources":["ImageBrowser.vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"login-prompt\" v-show=\"!this.$root.$data.isLoggedIn\">\n      <p>You are not logged in yet. Please log in to browse.</p>\n    </div>\n    <div v-show=\"this.$root.$data.isLoggedIn\">\n      <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n        <a class=\"navbar-brand\" href=\"#\">APOD</a>\n        <button\n          class=\"navbar-toggler\"\n          type=\"button\"\n          data-toggle=\"collapse\"\n          data-target=\"#navbarSupportedContent\"\n          aria-controls=\"navbarSupportedContent\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n        >\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul class=\"navbar-nav mr-auto\"></ul>\n          <label id=\"search-box-lable\" for=\"search-box\"\n            >Pick a date between 06/16/1995 and today</label\n          >\n          <form class=\"form-inline my-2 my-lg-0\">\n            <input\n              type=\"date\"\n              id=\"search-box\"\n              class=\"form-control mr-sm-2\"\n              name=\"selector\"\n              min=\"1995-06-16\"\n              placeholder=\"Search\"\n              aria-label=\"Search\"\n              v-bind:value=\"this.$root.$data.currentDate\"\n              v-bind:max=\"this.$props.maxDate\"\n            />\n            <button\n              id=\"search-button\"\n              class=\"btn btn-outline-success my-2 my-sm-0\"\n              type=\"submit\"\n              @click=\"updateDate\"\n            >\n              Explore!\n            </button>\n          </form>\n        </div>\n      </nav>\n      <div id=\"result\">\n        <h3 id=\"result-header\">\n          Astronomy image of {{ this.$root.$data.currentDate }}\n          <button id=\"save-button\" v-show=\"!isSaved\">Save</button>\n          <button id=\"unsave-button\" v-show=\"isSaved\">Unsave</button>\n        </h3>\n        <h4 id=\"media-title\">{{ mediaTitle }}</h4>\n        <div id=\"result-container\">\n          <div id=\"media-container\">\n            <div id=\"image\" v-show=\"mediaType === 'image'\">\n              <img v-bind:src=\"mediaURL\" />\n            </div>\n            <div id=\"video\" v-show=\"mediaType === 'video'\">\n              <iframe v-bind:src=\"mediaURL\"></iframe>\n            </div>\n          </div>\n          <div id=\"explanation-container\">\n            <p>\n              {{ explanation }}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\"use strict\";\n\nexport default {\n  name: \"ImageBrowser\",\n  created() {\n    this.setup();\n  },\n  props: {\n    maxDate: String,\n    mediaType: String,\n    mediaTitle: String,\n    mediaURL: String,\n    explanation: String,\n  },\n  data: function () {\n    return {\n      apiKey: \"5NqF6jh9w3uVhB9rwEeUJfSIwBgcavPvzYEO7lH3\",\n    };\n  },\n  methods: {\n    setup() {\n      // if (this.$root.$data.currentDate !== \"\") {\n      //   this.fetchMedia();\n      //   return;\n      // }\n      if (this.$root.$data.currentDate === \"\") {\n        let now = new Date();\n        let dd = String(now.getDate()).padStart(2, \"0\");\n        let mm = String(now.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n        let yyyy = now.getFullYear();\n        let today = `${yyyy}-${mm}-${dd}`;\n\n        // eslint-disable-next-line vue/no-mutating-props\n        this.$root.$data.currentDate = today;\n        this.$props.maxDate = today;\n      }\n      this.fetchMedia();\n    },\n    updateDate(event) {\n      event.preventDefault();\n      let selectedDate = document.getElementById(\"search-box\").value;\n      this.$root.$data.currentDate = selectedDate;\n      this.fetchMedia();\n    },\n    fetchMedia() {\n      let selectedDate = this.$root.$data.currentDate;\n      const URL = `https://api.nasa.gov/planetary/apod?api_key=${this.$data.apiKey}&date=${selectedDate}`;\n      fetch(URL)\n        .then((response) => response.json())\n        .then((json) => {\n          console.log(json);\n          this.$props.mediaType = json.media_type;\n          this.$props.mediaTitle = json.title;\n          this.$props.mediaURL = json.url;\n          this.$props.explanation = json.explanation;\n        });\n    },\n  },\n  computed: {\n    isSaved() {\n      return (\n        this.$root.$data.currentFavorites.find(\n          (date) => date === this.$root.$data.currentDate\n        ) !== undefined\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n* {\n  font-family: monospace !important;\n  color: #4f4f4f;\n}\n\n.navbar {\n  border-bottom: 6px gray double;\n  position: fixed !important;\n  top: 77px !important;\n  width: 100% !important;\n}\n\n.navbar-brand {\n  font-size: 30px !important;\n}\n\n#save-button,\n#unsave-button {\n  float: right;\n}\n\n#result {\n  margin: 90px 0 200px 0;\n}\n\ninput,\nlabel {\n  margin: 0.4rem 0;\n}\n#search-box-lable {\n  display: inline-block;\n  font-size: 1rem;\n}\n\n#media-container,\n#explanation-container {\n  justify-content: center;\n  margin: 50px 30px;\n}\n#image,\n#video {\n  display: flex;\n  justify-content: center;\n}\n#image > img {\n  width: 100%;\n}\n\n#explanation-container > p {\n  font-size: 2em;\n}\n\n#result-header {\n  font-weight: bold;\n  font-size: 2.75em;\n  margin: 160px 30px 20px 30px;\n}\n#media-title {\n  color: gray;\n  font-weight: bold;\n  font-size: 2.75em;\n  margin: 0 50px;\n}\n\n#video {\n  position: relative;\n  padding-bottom: 56.25%; /* 16:9, which is 56.25% of width */\n  height: 0;\n}\n\n#video > iframe {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n}\n@media only screen and (max-width: 999px) {\n  #search-button {\n    width: 100%;\n  }\n  #media-container {\n    margin: 10px;\n  }\n}\n\n@media only screen and (min-width: 1200px) {\n  /*#result-container{*/\n  /*    display: flex;*/\n  /*}*/\n  #media-container {\n    float: left;\n    width: 65%;\n    margin: 30px;\n  }\n  #search-box-lable {\n    margin: 0 15px;\n  }\n  #explanation-container {\n    margin: 0 30px 100px 30px;\n  }\n}\n\n#login-prompt {\n  margin-top: 125px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}